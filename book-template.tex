%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% LaTeX book template                           %%
%% Author:  Amber Jain (http://amberj.devio.us/) %%
%% License: ISC license                          %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[10pt,twocolumn]{book}

\usepackage[a4paper,top=2.5cm,bottom=3cm,inner=3cm,outer=3cm]{geometry}
% \usepackage[T2A]{fontenc}
% \usepackage[utf8]{inputenc}
% \usepackage[russian]{babel}
\usepackage[activate={true,nocompatibility},final,tracking=true,kerning=true,spacing=true,factor=1100,stretch=30,shrink=30,babel=true]{microtype}
\usepackage{indentfirst}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{tocloft}
\usepackage{titlesec}
\usepackage{epigraph}
\usepackage{verse}
\usepackage{graphicx}

% for generating dummy text
\usepackage{lipsum}


\begin{document}

% Data
%-------------------------------------------------------------------------------

\title{\textbf{Title}}
\author{L. Ipsum}
\newcommand{\titlehead}{\author. \title}
\date{~ \vspace{20pt}}
\newcommand{\datefoot}{\footnotesize
  Pluke planet, Kin-dza-dza galaxy, 2015 \\
  \copyright2015 Bureau of horns and hooves
}



% Style
%-------------------------------------------------------------------------------

\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand{\thesection}{}

\fancypagestyle{plain}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

\fancypagestyle{empty}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
  \fancyfoot[C]{\datefoot}
}

\fancyhf{}

\renewcommand{\chaptermark}[1]{\markboth{#1}{}}

\newcommand{\chapternamehead}{
  \renewcommand{\\}{}
  \parbox[b][2em]{\dimexpr\textwidth-4em\relax}{\raggedright \thechapter. \leftmark}
}

\lhead[\footnotesize\thepage\lefteqn{\phantom{\chapternamehead}}]{\footnotesize\chapternamehead}
\rhead[\footnotesize\titlehead]{\footnotesize\thepage}

\titleformat{\chapter}[display]{}{}{-26pt}{\raggedright\Huge\bfseries}
\titleformat{\section}[display]{}{}{0pt}{\raggedright\Large\bfseries}

\parsep 0pt
\parskip 0pt

\tolerance 800

\widowpenalty 10000
\clubpenalty 10000

\renewcommand\labelitemi{$\circ$}

\newcommand{\attrib}[1]{\nopagebreak{\raggedleft\footnotesize\it #1\par}}

\newcommand{\makechapter}[2]{
  \newpage\clearpage\thispagestyle{plain}
  \chapter[#1]{
    #1
    \ifx&#2&\else
      \\[2ex]\Large\raggedright\itshape#2
    \fi
  }
}



% Title
%-------------------------------------------------------------------------------

\onecolumn

% \newgeometry{hmarginratio=1:1,top=2.5cm, bottom=3cm}
\thispagestyle{empty}
\maketitle
% \newgeometry{top=2.5cm, bottom=3cm}



% Intro
%-------------------------------------------------------------------------------
\thispagestyle{plain}~\vspace{125pt}

\lipsum[1]

\newpage



% Preface
%-------------------------------------------------------------------------------

\chapter*{Preface}

\lipsum[2-3]

\twocolumn

\newpage
\thispagestyle{plain}



% Content
%-------------------------------------------------------------------------------

\pagestyle{fancy}

\makechapter{Once upon a time...}{a long story begins here}
\lipsum[4-31]

\makechapter{In a galaxy far far away}{}
\lipsum[31-55]



% Last pages for ToC
%-------------------------------------------------------------------------------
\newpage

\pagestyle{plain}

\renewcommand{\cftchapdotsep}{\cftdotsep}
\renewcommand\cftchapaftersnum{:~}
\cftsetpnumwidth{2em}
\addtolength\cftchapnumwidth{3em}
\addtolength\cftsecnumwidth{2.5em}
\cftsetrmarg{4em}
\setlength{\cftbeforechapskip}{.7em}
\renewcommand{\cftchapfont}{\bfseries}

\tableofcontents

\end{document}
